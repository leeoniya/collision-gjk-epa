!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Collisiongjkepa=t()}}(function(){return function s(c,i,a){function u(r,t){if(!i[r]){if(!c[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(h)return h(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=i[r]={exports:{}};c[r][0].call(o.exports,function(t){return u(c[r][1][t]||t)},o,o.exports,s,c,i,a)}return i[r].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)u(a[t]);return u}({1:[function(t,r,e){"use strict";var a=function(t,r,e){this.a=t,this.b=r,this.c=e,this.n=t.constructor.Cross(r.subtract(t),e.subtract(t)).normalize()},n={EPSILON:1e-6,_getNormal:function(t,r,e){var n=t.constructor.Dot,o=n(t,e),s=n(r,e),c=r.scale(o).subtract(t.scale(s));return c.lengthSquared()<this.EPSILON*this.EPSILON?c.scale(0):c.normalize()},_getBarycenter:function(t){for(var r=t[0].constructor.Zero(),e=0;e<t.length;e++)r.addToRef(t[e],r);return r.scaleInPlace(1/t.length,r),r},_getFarthestPointInDirection:function(t,r){for(var e=t[0].constructor.Dot,n=e(t[0],r),o=0,s=1;s<t.length;s++){var c=e(t[s],r);n<c&&(n=c,o=s)}return t[o]},_getNearestEdge:function(t){for(var r,e,n=1/0,o=0;o<t.length;o++){var s=(o+1)%t.length,c=t[o],i=t[s].subtract(c);if(0!==i.lengthSquared()){var a=c,u=this._getNormal(i,a,i);if(0===u.lengthSquared()){u.y=-i.x,u.x=i.y;var h=this._getBarycenter(t),l=c.subtract(h);u.constructor.Dot(u,l)<0&&(u.y=-u.y,u.x=-u.x)}var f=Math.abs(u.constructor.Dot(u,c));f<n&&(n=f,r=s,e=u)}}return{distance:n,index:r,normal:e}},_getNearestTriangle:function(t){for(var r,e=1/0,n=0;n<t.length;n++){var o=t[n],s=Math.abs(o.n.constructor.Dot(o.n,o.a));s<e&&(e=s,r=n)}return{distance:e,index:r}},_containsLine:function(t,r){var e=t[1],n=t[0].subtract(e),o=e.scale(-1);return 0!==n.lengthSquared()?r.copyFrom(this._getNormal(n,o,n)):r.copyFrom(o),!1},_containsTriangle:function(t,r){var e=t[2],n=t[2].constructor.Dot,o=t[1],s=t[0],c=o.subtract(e),i=s.subtract(e),a=e.scale(-1),u=this._getNormal(i,c,c),h=this._getNormal(c,i,i);if(0<n(u,a))t.splice(0,1),r.copyFrom(u);else{if(!(0<n(h,a))){if(void 0===r.z)return!0;var l=t[2].constructor.Cross(c,i);return r.copyFrom(l),n(l,a)<=0&&(t[0]=o,t[1]=s,t[2]=e,r.copyFrom(l.scale(-1))),!1}t.splice(1,1),r.copyFrom(h)}},_containsTetrahedron:function(t,r){var e=t[3],n=e.constructor.Dot,o=e.constructor.Cross,s=t[2],c=t[1],i=t[0],a=s.subtract(e),u=c.subtract(e),h=i.subtract(e),l=e.scale(-1),f=o(a,u),d=o(u,h),g=o(h,a);switch((0<n(f,l)?1:0)|(0<n(d,l)?2:0)|(0<n(g,l)?4:0)){case 1:return this._checkTetrahedron(l,a,u,f,r,t);case 2:return t[2]=c,t[1]=i,this._checkTetrahedron(l,u,h,d,r,t);case 4:return t[1]=s,t[2]=i,this._checkTetrahedron(l,h,a,g,r,t);case 3:return this._checkTwoTetrahedron(l,a,u,f,r,t);case 6:return t[2]=c,t[1]=i,t[0]=s,this._checkTwoTetrahedron(l,u,h,d,r,t);case 5:return t[1]=s,t[2]=i,t[0]=c,this._checkTwoTetrahedron(l,h,a,g,r,t)}return!0},_checkTwoTetrahedron:function(t,r,e,n,o,s){var c=n.constructor.Cross(n,e);if(0<c.constructor.Dot(c,t))return s[2]=s[1],s[1]=s[0],r=s[2].subtract(s[3]),e=s[1].subtract(s[3]),n=r.constructor.Cross(r,e),this._checkTetrahedron(t,r,e,n,o,s);var i=n.constructor.Cross(r,n);return 0<i.constructor.Dot(i,t)?(s.splice(0,2),o.copyFrom(this._getNormal(r,t,r)),!1):void 0},_checkTetrahedron:function(t,r,e,n,o,s){var c=n.constructor.Cross(n,e);if(0<c.constructor.Dot(c,t))return s[2]=s[3],s.splice(3,1),s.splice(0,1),o.copyFrom(this._getNormal(e,t,e)),!1;var i=r.constructor.Cross(r,n);return 0<i.constructor.Dot(i,t)?(s.splice(0,2),o.copyFrom(this._getNormal(r,t,r))):(s.splice(0,1),o.copyFrom(n)),!1},_addEdge:function(t,r){for(var e=0;e<t.length;e++)if(t[e].a===r.b&&t[e].b===r.a)return void t.splice(e,1);t.push(r)},support:function(t,r,e){e.normalize();var n=this._getFarthestPointInDirection(t,e),o=this._getFarthestPointInDirection(r,e.scale(-1));return n.subtract(o)},containsOrigin:function(t,r){return 2===t.length?this._containsLine(t,r):3===t.length?this._containsTriangle(t,r):4===t.length&&this._containsTetrahedron(t,r)},check:function(t,r){var e,n=0,o=[],s=this._getBarycenter(t),c=this._getBarycenter(r),i=s.subtract(c).normalize();if(i.lengthSquared()<this.EPSILON&&(i.x=1),(e=o[0]=this.support(t,r,i)).constructor.Dot(e,i)<=0)return!1;i.scaleInPlace(-1,i);for(var a=r.length*t.length;n<a;){if(0===i.lengthSquared()&&2<=o.length){var u=(i=o[o.length-1].subtract(o[o.length-2])).y;i.y=-i.x,i.x=u}if((e=this.support(t,r,i)).constructor.Dot(e,i)<=0)return!1;if(o.push(e),this.containsOrigin(o,i))return o;n++}},findResponseWithEdge:function(t,r,e){var n=this._getNearestEdge(e),o=this.support(t,r,n.normal);return Math.abs(o.constructor.Dot(o,n.normal))-n.distance<=this.EPSILON?n.normal.scale(n.distance):(e.splice(n.index,0,o),!1)},findResponseWithTriangle:function(t,r,e){if(0===e.length)return!1;var n=this._getNearestTriangle(e),o=e[n.index],s=this.support(t,r,o.n);if(Math.abs(s.constructor.Dot(s,o.n))-n.distance<=this.EPSILON)return o.n.scale(n.distance);for(var c=[],i=e.length-1;0<=i;i--)0<(o=e[i]).n.constructor.Dot(o.n,s.subtract(e[i].a))&&(this._addEdge(c,{a:o.a,b:o.b}),this._addEdge(c,{a:o.b,b:o.c}),this._addEdge(c,{a:o.c,b:o.a}),e.splice(i,1));for(i=0;i<c.length;i++)0!==(o=new a(s,c[i].a,c[i].b)).n.length()&&e.push(o);return!1},getResponse:function(t,r,e){for(var n,o=0,s=void 0!==e[0].z?[new a(e[0],e[1],e[2]),new a(e[0],e[2],e[3]),new a(e[0],e[3],e[1]),new a(e[1],e[3],e[2])]:null,c=r.length*t.length;o<c;){if(n=void 0===e[0].z?this.findResponseWithEdge(t,r,e):this.findResponseWithTriangle(t,r,s)){var i=n.clone().normalize().scaleInPlace(this.EPSILON);return n.addToRef(i,n)}o++}return!1},isIntersecting:function(t,r){return!!this.check(t,r)},intersect:function(t,r){var e=this.check(t,r);return!!e&&this.getResponse(t,r,e)}};r.exports=n},{}]},{},[1])(1)});